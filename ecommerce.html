<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>바이오닷 이커머스 분석 (가중평점 추가)</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
  <div id="page-loading-message" class="loading-message">
    <h2>바이오닷 대시보드로 이동 중...</h2>
    <p>잠시만 기다려주세요.</p>
  </div>

  <header>
    <div class="container">
      <h1>바이오닷 이커머스 분석</h1>
      <nav>
        <ul style="list-style:none; display:flex; gap:20px;">
          <li><a href="index.html">홈</a></li>
          <li><a href="survey.html">설문조사 분석</a></li>
          <li><a href="ecommerce.html" style="color:#3498db; font-weight:bold;">이커머스 분석</a></li>
          <li><a href="text-analysis.html">텍스트 분석</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- 색상 범례: 맨 위 배치 -->
    <section style="margin-top:20px;">
      <h3>🎨 색상 범례</h3>
      <ul style="list-style:none; padding:0; display:flex; flex-wrap:wrap; gap:20px; align-items:center;">
        <li style="display:flex; align-items:center;">
          <div style="width:120px; height:15px; background:linear-gradient(to right, hsl(0,85%,60%), hsl(60,85%,60%), hsl(120,85%,60%), hsl(180,85%,60%), hsl(240,85%,60%)); margin-right:5px;"></div>
          리뷰 수 상위 75%
        </li>
        <li style="display:flex; align-items:center;">
          <div style="width:120px; height:15px; background:linear-gradient(to right, hsl(0,0%,90%), hsl(0,0%,75%), hsl(0,0%,60%), hsl(0,0%,45%), hsl(0,0%,30%)); margin-right:5px;"></div>
          리뷰 수 하위 25%
        </li>
        <li>
          <span style="display:inline-block; width:15px; height:15px; background:#000; margin-right:5px;"></span>
          <span style="color:#27ae60; font-weight:bold;">✔︎</span> 리뷰 없음
        </li>
      </ul>
    </section>

    <section>
      <h2>1) 리뷰 수 기준 정렬</h2>
      <canvas id="reviewCountChart"></canvas>
    </section>
    <section>
      <h2>2) 평균 평점 기준 정렬</h2>
      <canvas id="ratingChart"></canvas>
    </section>
    
    <section style="margin-top:40px;">
      <h2>가중평점 계산 설명</h2>
      <p>리뷰가 적으면 숫자 하나로는 믿기 어려우니까, 모두의 평균을 조금 섞어서 계산해요.</p>
      <ul>
        <li>📊 전체 평균 평점: <strong>3.93점</strong></li>
        <li>🧮 최소 리뷰 수 기준: <strong>40개</strong></li>
      </ul>
      <p>✏️ <strong>공정한 평점 공식</strong>:</p>
      <pre style="background:#f0f0f0; padding:10px;">
(⭐ 평균점수 × 리뷰수 + 🎯 초깃값 × 🧮 기준리뷰수) ÷ (리뷰수 + 🧮 기준리뷰수)
= (리뷰수 / (리뷰수 + 🧮 40)) × ⭐ 평균점수 + (🧮 40 / (리뷰수 + 🧮 40)) × 🎯 3.93
      </pre>
    </section>

    <section>
      <h2>3) 보정 평점 (Weighted Rating) 기준 정렬</h2>
      <canvas id="weightedChart"></canvas>
    </section>

    <section style="margin-top:40px;">
      <h2>리뷰가 없는 제품</h2>
      <ul id="noReviewList"></ul>
    </section>


  </main>

  <footer>
    <div class="container">
      <p>© 2025 바이오닷 데이터 시각화 프로젝트</p>
    </div>
  </footer>

  <script src="js/charts_ecommerce_v2.js"></script>
</body>
</html>
